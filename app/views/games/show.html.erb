<% @game = Game.find(session[:game_id]) %>
<% if session[:bear] %>
<%= "THERES A BEAR "%>
<% else %>
<%= "u win cookie" %>
<% end %>
Score: <%= @game.score %>
<div class="container">
  <h3 class="center-align">Unscramble the fortune to get the cookie!</h3>

      <div class="card horizontal medium">
        <div class="card-image">
          <%= image_tag("doom.png", :alt => "doom") %>
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <h4>
              <div id="text">
                <%= @game.fortune_scrambler %>
              </div>
            </h4>            
          </div>
          <div class="card-action">
            <a href="#">This is a link</a>
          </div>
        </div>
      </div>





  <div class="right">
    <%= form_tag game_update_path, method: "patch" do %>
        <%= text_field_tag :user_answer %>
        <%= hidden_field_tag 'game', @game %>
        <%= submit_tag "Check Answer", class:"btn" %>
    <% end %>
    <button id="shuffle" type="button" class="btn">Shuffle Words</button>
  </div>

</div>
<script>

document.addEventListener('DOMContentLoaded', function(){

    var textDiv = document.getElementById('text');
    document.getElementById('shuffle').addEventListener('click',function(){
        var words = textDiv.innerText.split(' ');
        var len = words.length;
        var result = '';
        textDiv.innerText = '';
        for(var i = 0; i < len; ++i){
            var randIndex = Math.floor((Math.random() * (words.length)));
            result += words[randIndex] + ' ';
            words.splice(randIndex, 1);
        }
        textDiv.innerText = result;
    }, false);
}, false)

</script>
